<div class="max-w-4xl mx-auto px-4 py-8">
  <h1 class="text-3xl font-bold text-center text-foreground mb-8">My Friends</h1>

  <% if @friends.any? %>
    <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-6">
      <% @friends.each do |friend| %>
        <div class="bg-card text-card-foreground rounded-lg shadow-sm p-6 flex flex-col items-center text-center">
          <%= image_tag friend.avatar, alt: friend.username, class: "h-20 w-20 rounded-full object-cover mb-4 border-2 border-primary" %>
          <%= link_to friend.username, user_path(friend), class: "text-lg font-semibold text-foreground hover:underline mb-4" %>
          <div class="flex flex-wrap justify-center gap-2">
            <%= link_to user_path(friend), class: "inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 bg-secondary text-secondary-foreground hover:bg-secondary/80 h-9 px-3 py-1" do %>
              <i class="fa-solid fa-eye mr-2"></i> View Profile
            <% end %>
            <%= button_to '<i class="fa-solid fa-trash mr-2"></i> Remove Friend'.html_safe, friendship_path(current_user.friendships.find_by(friend: friend) || current_user.inverse_friendships.find_by(user: friend)), method: :delete, data: { confirm: "Are you sure you want to remove #{friend.username}?" }, class: "inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 bg-destructive text-destructive-foreground hover:bg-destructive/90 h-9 px-3 py-1" %>
          </div>
        </div>
      <% end %>
    </div>
  <% else %>
    <p class="text-center text-muted-foreground text-lg mt-10">You don't have any friends yet. Send some friend requests!</p>
  <% end %>
</div>