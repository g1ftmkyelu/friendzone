<div class="max-w-6xl mx-auto px-4 py-8">
  <h1 class="text-3xl font-bold text-center text-foreground mb-8">My Messages</h1>

  <div class="flex flex-col md:flex-row gap-6 min-h-[calc(100vh-150px)]">
    <div class="flex-shrink-0 w-full md:w-72 bg-card text-card-foreground rounded-lg shadow-md p-6">
      <h2 class="text-2xl font-semibold text-foreground mb-5 border-b border-border pb-3">Conversations</h2>
      <% if @conversation_users.any? %>
        <div class="flex flex-col">
          <% @conversation_users.each do |user| %>
            <%= link_to message_path(user), class: "flex items-center p-3 mb-2 rounded-md text-foreground transition-colors hover:bg-muted" do %>
              <%= image_tag user.avatar, alt: user.username, class: "h-10 w-10 rounded-full object-cover mr-3 min-h-[40px] bg-muted animate-pulse", loading: "lazy" %>
              <span class="text-base font-medium"><%= user.username %></span>
            <% end %>
          <% end %>
        </div>
      <% else %>
        <p class="text-center text-muted-foreground text-base">No conversations yet.</p>
      <% end %>
    </div>

    <div class="flex-grow bg-card text-card-foreground rounded-lg shadow-md p-6 flex flex-col justify-center items-center">
      <p class="text-center text-muted-foreground text-lg">Select a conversation to view messages.</p>
    </div>
  </div>
</div>